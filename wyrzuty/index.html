<!doctype html>
<html lang="pl">
<head>
  <meta charset="utf-8" />
  <title>Wyrzuty s≈Çoneczne (NASA DONKI + sondy)</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="stylesheet" href="../css/styles.css" />
  <style>
    /* trochƒô dodatkowego stylu tylko dla tej podstrony */
    .flare-box {
      background: rgba(0,0,0,.35);
      border: 1px solid rgba(255,255,255,.08);
      border-radius: 12px;
      box-shadow: var(--shadow);
      padding: 12px;
      margin-bottom: 10px;
    }
    #flareList {
      max-height: 600px; /* ≈ºeby nie zajmowa≈Ço ca≈Çej strony */
      overflow-y: auto;
      padding-right: 6px;
    }
    #flareList::-webkit-scrollbar { width: 8px; }
    #flareList::-webkit-scrollbar-thumb {
      background: var(--accent);
      border-radius: 10px;
    }
  </style>
</head>
<body>
  <div class="nav">
    <div class="nav-inner container">
      <div class="brand"><div class="logo"></div><h1>AstroTrapez</h1></div>
      <div><a class="btn" href="../">‚¨Ö Wr√≥ƒá</a></div>
    </div>
  </div>

  <main class="container section">
    <h2>‚òÄÔ∏è Wyrzuty s≈Çoneczne</h2>
    <div class="grid grid-2" style="margin-top:16px">
      
      <!-- LEWA KOLUMNA: podglƒÖd sond -->
      <div>
        <h3>üõ∞Ô∏è PodglƒÖd z sond</h3>
        <div class="flare-box">
          <h4>NASA SDO (304 √Ö)</h4>
          <img src="https://sdo.gsfc.nasa.gov/assets/img/latest/latest_1024_0304.jpg" 
               alt="SDO 304 √Ö" style="width:100%;border-radius:8px">
        </div>
        <div class="flare-box">
          <h4>SOHO LASCO C2 (korona)</h4>
          <img src="https://sohowww.nascom.nasa.gov/data/realtime/c2/1024/latest.jpg" 
               alt="SOHO LASCO C2" style="width:100%;border-radius:8px">
        </div>
      </div>

      <!-- PRAWA KOLUMNA: dane DONKI -->
      <div>
        <h3>üîé Dane z NASA DONKI (14 dni)</h3>
        <div id="flareList">Wczytywanie...</div>
      </div>
    </div>
  </main>

  <a class="tiply-fab" href="https://tipply.pl/@trap3zik" target="_blank" rel="noopener">üíú Wesprzyj</a>

  <script>
    async function loadFlares(){
      const end=new Date(); 
      const start=new Date(end.getTime()-1000*60*60*24*14);
      const url=`https://api.nasa.gov/DONKI/FLR?startDate=${start.toISOString().slice(0,10)}&endDate=${end.toISOString().slice(0,10)}&api_key=DEMO_KEY`;
      try{
        const r=await fetch(url); const data=await r.json();
        const list=document.getElementById('flareList'); list.innerHTML='';
        if(Array.isArray(data) && data.length){
          data.sort((a,b)=>new Date(b.beginTime)-new Date(a.beginTime));
          for(const flr of data){
            const el=document.createElement('div'); el.className='flare-box';
            el.innerHTML = `<strong>${flr.classType||'N/A'}</strong> ‚Ä¢ ${new Date(flr.beginTime).toLocaleString()}<br>
              ${flr.sourceLocation||''} ${flr.activeRegionNum?('‚Ä¢ AR '+flr.activeRegionNum):''}
              ${flr.peakTime?('<br><span style="color:#aab2d5">peak:</span> '+new Date(flr.peakTime).toLocaleString()):''}`;
            list.appendChild(el);
          }
        } else {
          list.textContent = 'Brak danych w tym zakresie.';
        }
      }catch(e){
        document.getElementById('flareList').textContent = 'B≈ÇƒÖd pobierania danych NASA.';
      }
    }
    loadFlares();
  </script>
</body>
</html>
